# Modern Tmux configuration for Ubuntu 24.04/25.04

# Change default prefix to Ctrl-a
set-option -g prefix C-a
unbind-key C-b
bind-key C-a send-prefix

# Enable mouse support
set -g mouse on

# Use 256 colors
set -g default-terminal "screen-256color"
set -ga terminal-overrides ",*256col*:Tc"

# Start window and pane numbering at 1
set -g base-index 1
setw -g pane-base-index 1

# Renumber windows when one is closed
set -g renumber-windows on

# Increase scrollback buffer
set -g history-limit 50000

# Display messages for 2 seconds
set -g display-time 2000

# Reduce escape time for better vim experience
set -sg escape-time 0

# Aggressive resize
setw -g aggressive-resize on

# Key bindings - Vim style
set-option -g status-keys vi
set-window-option -g mode-keys vi

# More intuitive split keys
bind | split-window -h -c "#{pane_current_path}"
bind _ split-window -v -c "#{pane_current_path}"
bind c new-window -c "#{pane_current_path}"

# Vim-style pane navigation
bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
unbind l
bind l select-pane -R

# Vim-style pane resizing
bind -r H resize-pane -L 5
bind -r J resize-pane -D 5
bind -r K resize-pane -U 5
bind -r L resize-pane -R 5

# Synchronize panes
bind S set-window-option synchronize-panes on
bind s set-window-option synchronize-panes off

# Session navigation
bind P switch-client -p
bind N switch-client -n
bind L switch-client -l

# Window navigation
unbind \;
bind \; last-window
bind "'" last-pane
bind / command-prompt -p index "select-window -t ':%%'"

# Reload configuration
bind r source-file ~/.tmux.conf \; display "Configuration reloaded!"

# Copy mode bindings (vi-like)
bind-key -T copy-mode-vi v send-keys -X begin-selection
bind-key -T copy-mode-vi y send-keys -X copy-selection-and-cancel
bind-key -T copy-mode-vi C-v send-keys -X rectangle-toggle

# Status bar configuration
set -g status on
set -g status-interval 5
set -g status-position bottom
set -g status-justify left

# Status bar colors
set -g status-style 'bg=colour234 fg=colour250'

# Left status bar
set -g status-left-length 30
set -g status-left '#[fg=colour39,bold][#[fg=colour76]#S#[fg=colour39]:#[fg=colour33]#h#[fg=colour39,bold]]'

# Window status
setw -g window-status-format ' #[fg=colour244]#I#[fg=colour250]:#[fg=colour250]#W#[fg=colour244]#F '
setw -g window-status-current-format ' #[fg=colour81,bold]#I#[fg=colour250]:#[fg=colour255,bold]#W#[fg=colour50]#F '

# Right status bar
set -g status-right-length 50
set -g status-right '#[fg=colour39][#[fg=colour250]%Y-%m-%d #[fg=colour255,bold]%H:%M#[fg=colour39]]'

# Pane border colors
set -g pane-border-style 'fg=colour238'
set -g pane-active-border-style 'fg=colour39'

# Message style
set -g message-style 'bg=colour235 fg=colour39 bold'

# Activity monitoring
setw -g monitor-activity on
set -g visual-activity off

# Auto-rename windows based on running program
setw -g automatic-rename on
set -g set-titles on
set -g set-titles-string '#h:#S.#I.#P #W'
